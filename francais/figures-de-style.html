<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les figures de style - Fran√ßais 4√®me</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            padding: 20px;
        }
        h2 { color: #e74c3c; border-color: #e74c3c; }
        h3 { color: #c0392b; }
        button { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }

        /* Score tracker */
        .score-tracker {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            font-weight: bold;
            z-index: 1000;
        }
        .score-tracker span {
            color: #e74c3c;
            font-size: 1.2em;
        }

        /* QCM styles */
        .qcm-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        .qcm-option {
            padding: 15px 20px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .qcm-option:hover {
            border-color: #e74c3c;
            background: #fdf2f2;
        }
        .qcm-option.selected {
            border-color: #e74c3c;
            background: #fdf2f2;
        }
        .qcm-option.correct {
            border-color: #28a745;
            background: #d4edda;
        }
        .qcm-option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }
        .qcm-option input {
            display: none;
        }
        .qcm-circle {
            width: 24px;
            height: 24px;
            border: 2px solid #ddd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .qcm-option.selected .qcm-circle {
            border-color: #e74c3c;
            background: #e74c3c;
        }
        .qcm-option.selected .qcm-circle::after {
            content: "‚úì";
            color: white;
            font-size: 14px;
        }

        /* Drag and drop */
        .drag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
            min-height: 50px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 10px;
        }
        .drag-item {
            padding: 10px 20px;
            background: #e74c3c;
            color: white;
            border-radius: 20px;
            cursor: grab;
            user-select: none;
            transition: transform 0.2s;
        }
        .drag-item:hover {
            transform: scale(1.05);
        }
        .drag-item.dragging {
            opacity: 0.5;
        }
        .drop-zone {
            min-width: 150px;
            min-height: 45px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 5px;
            padding: 5px 15px;
            background: #fafafa;
        }
        .drop-zone.over {
            border-color: #e74c3c;
            background: #fdf2f2;
        }
        .drop-zone.filled {
            border-style: solid;
            border-color: #e74c3c;
        }

        /* Flashcards */
        .flashcard-container {
            perspective: 1000px;
            margin: 20px auto;
            width: 100%;
            max-width: 400px;
        }
        .flashcard {
            width: 100%;
            height: 200px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .flashcard-front {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            font-size: 1.3em;
        }
        .flashcard-back {
            background: white;
            transform: rotateY(180deg);
            color: #333;
            flex-direction: column;
        }
        .flashcard-back h4 {
            color: #e74c3c;
            margin-bottom: 10px;
        }
        .flashcard-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        .flashcard-nav button {
            padding: 10px 25px;
            font-size: 16px;
        }
        .flashcard-counter {
            text-align: center;
            margin-top: 10px;
            color: #666;
        }

        /* Progress bar */
        .progress-container {
            background: #ddd;
            border-radius: 10px;
            height: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Hint button */
        .hint-btn {
            background: #ffc107;
            color: #333;
            padding: 8px 15px;
            font-size: 14px;
            margin-left: 10px;
        }
        .hint-btn:hover {
            background: #e0a800;
        }
        .hint-text {
            display: none;
            background: #fff3cd;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #ffc107;
        }
        .hint-text.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .shake {
            animation: shake 0.3s ease;
        }
        .bounce {
            animation: bounce 0.3s ease;
        }

        /* Timer */
        .timer {
            font-size: 1.5em;
            font-weight: bold;
            color: #e74c3c;
            text-align: center;
            margin-bottom: 15px;
        }
        .timer.warning {
            color: #ffc107;
        }
        .timer.danger {
            color: #dc3545;
            animation: bounce 0.5s infinite;
        }
    </style>
</head>
<body>
    <div class="nav-home">
        <a href="index.html">‚¨Ö Fran√ßais</a>
    </div>

    <div class="score-tracker">
        Score: <span id="totalScore">0</span> points
    </div>

    <div class="container" style="margin-top: 60px;">
        <header class="bg-francais">
            <h1>üìù Les figures de style</h1>
            <p>Reconna√Ætre et utiliser les principales figures de style</p>
        </header>

        <div class="content">
            <h2>1. Qu'est-ce qu'une figure de style ?</h2>
            <div class="section">
                <p>Une <strong>figure de style</strong> est un proc√©d√© d'expression qui s'√©carte de l'usage ordinaire de la langue pour produire un effet particulier : embellir, surprendre, √©mouvoir, convaincre...</p>
            </div>

            <h2>2. Les figures de ressemblance</h2>
            <div class="section">
                <h3>La comparaison</h3>
                <p>Elle rapproche deux √©l√©ments √† l'aide d'un <strong>outil de comparaison</strong> (comme, tel, semblable √†, pareil √†...).</p>
                <div class="example">
                    <div class="example-main">¬´ Il est fort comme un lion. ¬ª</div>
                    <div class="example-translation">‚Üí Compar√© : il / Comparant : lion / Outil : comme</div>
                </div>

                <h3>La m√©taphore</h3>
                <p>C'est une comparaison <strong>sans outil de comparaison</strong>. Elle assimile directement un √©l√©ment √† un autre.</p>
                <div class="example">
                    <div class="example-main">¬´ Cet homme est un lion. ¬ª</div>
                    <div class="example-translation">‚Üí Pas de mot de comparaison, identification directe</div>
                </div>

                <h3>La personnification</h3>
                <p>Elle attribue des caract√©ristiques <strong>humaines</strong> √† un animal, un objet ou une id√©e.</p>
                <div class="example">
                    <div class="example-main">¬´ Le vent hurle dans les arbres. ¬ª</div>
                    <div class="example-translation">‚Üí Le vent (non-humain) fait une action humaine (hurler)</div>
                </div>
            </div>

            <h2>3. Les figures d'insistance</h2>
            <div class="section">
                <h3>L'anaphore</h3>
                <p>C'est la <strong>r√©p√©tition</strong> d'un mot ou groupe de mots au d√©but de plusieurs phrases ou vers.</p>
                <div class="example">
                    <div class="example-main">¬´ Paris ! Paris outrag√© ! Paris bris√© ! Paris martyris√© ! ¬ª</div>
                </div>

                <h3>L'hyperbole</h3>
                <p>C'est une <strong>exag√©ration</strong> qui amplifie la r√©alit√©.</p>
                <div class="example">
                    <div class="example-main">¬´ Je meurs de faim ! ¬ª</div>
                </div>
            </div>

            <h2>4. Les figures d'opposition</h2>
            <div class="section">
                <h3>L'antith√®se</h3>
                <p>Elle oppose deux mots ou id√©es <strong>contraires</strong> dans une m√™me phrase.</p>
                <div class="example">
                    <div class="example-main">¬´ Je vis, je meurs ; je me br√ªle et me noie. ¬ª</div>
                </div>

                <h3>L'oxymore</h3>
                <p>C'est l'association de deux mots de sens <strong>contradictoires</strong> c√¥te √† c√¥te.</p>
                <div class="example">
                    <div class="example-main">¬´ Cette obscure clart√© qui tombe des √©toiles. ¬ª</div>
                </div>
            </div>

            <h2>5. Les figures d'att√©nuation</h2>
            <div class="section">
                <h3>L'euph√©misme</h3>
                <p>Il att√©nue une r√©alit√© <strong>d√©sagr√©able ou choquante</strong>.</p>
                <div class="example">
                    <div class="example-main">¬´ Il nous a quitt√©s. ¬ª (pour dire "il est mort")</div>
                </div>

                <h3>La litote</h3>
                <p>Elle dit <strong>moins pour sugg√©rer plus</strong>.</p>
                <div class="example">
                    <div class="example-main">¬´ Ce n'est pas mal. ¬ª (pour dire "c'est tr√®s bien")</div>
                </div>
            </div>

            <div class="important">
                <strong>üí° Astuce pour les retenir :</strong><br>
                ‚Ä¢ Comparaison = COMME (outil visible)<br>
                ‚Ä¢ M√©taphore = comparaison SANS outil<br>
                ‚Ä¢ Hyperbole = EXAG√âRATION<br>
                ‚Ä¢ Oxymore = 2 mots OPPOS√âS coll√©s
            </div>

            <!-- EXERCICE 1: Flashcards -->
            <div class="exercise">
                <h2 style="color: #333; margin-top: 0;">üé¥ Exercice 1 : Flashcards - R√©vise les d√©finitions</h2>
                <p>Clique sur la carte pour voir la r√©ponse, puis passe √† la suivante.</p>

                <div class="flashcard-container">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="flashcard-front">
                            <span id="flashcard-question">Comparaison sans outil de comparaison ?</span>
                        </div>
                        <div class="flashcard-back">
                            <h4 id="flashcard-answer-title">La m√©taphore</h4>
                            <p id="flashcard-answer-desc">Ex: "Cet homme est un lion"</p>
                        </div>
                    </div>
                </div>
                <div class="flashcard-counter">
                    Carte <span id="cardCurrent">1</span> / <span id="cardTotal">8</span>
                </div>
                <div class="flashcard-nav">
                    <button onclick="prevCard()">‚¨Ö Pr√©c√©dent</button>
                    <button onclick="nextCard()">Suivant ‚û°</button>
                </div>
            </div>

            <!-- EXERCICE 2: QCM -->
            <div class="exercise" style="margin-top: 30px;">
                <h2 style="color: #333; margin-top: 0;">‚úÖ Exercice 2 : QCM - Identifie la figure</h2>
                <p>Pour chaque phrase, choisis la bonne figure de style. <strong>+10 points par bonne r√©ponse !</strong></p>

                <div class="progress-container">
                    <div class="progress-bar" id="qcmProgress" style="width: 0%"></div>
                </div>

                <div id="qcm-container">
                    <!-- Question 1 -->
                    <div class="question" id="qcm1">
                        <strong>1.</strong> ¬´ Ses cheveux √©taient d'or pur. ¬ª
                        <button class="hint-btn" onclick="showHint('hint1')">üí° Indice</button>
                        <div class="hint-text" id="hint1">Y a-t-il un mot de comparaison comme "comme" ou "tel" ?</div>
                        <div class="qcm-options">
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm1', 'b')">
                                <span class="qcm-circle"></span>
                                <span>Comparaison</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm1', 'b')" data-correct="true">
                                <span class="qcm-circle"></span>
                                <span>M√©taphore</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm1', 'c')">
                                <span class="qcm-circle"></span>
                                <span>Hyperbole</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm1', 'd')">
                                <span class="qcm-circle"></span>
                                <span>Personnification</span>
                            </label>
                        </div>
                    </div>

                    <!-- Question 2 -->
                    <div class="question" id="qcm2" style="display: none;">
                        <strong>2.</strong> ¬´ Je t'ai dit mille fois de ranger ta chambre ! ¬ª
                        <button class="hint-btn" onclick="showHint('hint2')">üí° Indice</button>
                        <div class="hint-text" id="hint2">Est-ce vraiment mille fois ? C'est une exag√©ration...</div>
                        <div class="qcm-options">
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm2', 'a')">
                                <span class="qcm-circle"></span>
                                <span>Litote</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm2', 'b')">
                                <span class="qcm-circle"></span>
                                <span>Anaphore</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm2', 'c')" data-correct="true">
                                <span class="qcm-circle"></span>
                                <span>Hyperbole</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm2', 'd')">
                                <span class="qcm-circle"></span>
                                <span>Euph√©misme</span>
                            </label>
                        </div>
                    </div>

                    <!-- Question 3 -->
                    <div class="question" id="qcm3" style="display: none;">
                        <strong>3.</strong> ¬´ La lune r√™vait dans le ciel. ¬ª
                        <button class="hint-btn" onclick="showHint('hint3')">üí° Indice</button>
                        <div class="hint-text" id="hint3">La lune peut-elle vraiment r√™ver ? C'est une action humaine...</div>
                        <div class="qcm-options">
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm3', 'a')" data-correct="true">
                                <span class="qcm-circle"></span>
                                <span>Personnification</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm3', 'b')">
                                <span class="qcm-circle"></span>
                                <span>M√©taphore</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm3', 'c')">
                                <span class="qcm-circle"></span>
                                <span>Comparaison</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm3', 'd')">
                                <span class="qcm-circle"></span>
                                <span>Oxymore</span>
                            </label>
                        </div>
                    </div>

                    <!-- Question 4 -->
                    <div class="question" id="qcm4" style="display: none;">
                        <strong>4.</strong> ¬´ Elle court comme une gazelle. ¬ª
                        <button class="hint-btn" onclick="showHint('hint4')">üí° Indice</button>
                        <div class="hint-text" id="hint4">Regarde bien : y a-t-il un outil de comparaison ?</div>
                        <div class="qcm-options">
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm4', 'a')">
                                <span class="qcm-circle"></span>
                                <span>M√©taphore</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm4', 'b')" data-correct="true">
                                <span class="qcm-circle"></span>
                                <span>Comparaison</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm4', 'c')">
                                <span class="qcm-circle"></span>
                                <span>Hyperbole</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm4', 'd')">
                                <span class="qcm-circle"></span>
                                <span>Litote</span>
                            </label>
                        </div>
                    </div>

                    <!-- Question 5 -->
                    <div class="question" id="qcm5" style="display: none;">
                        <strong>5.</strong> ¬´ Un silence assourdissant r√©gnait. ¬ª
                        <button class="hint-btn" onclick="showHint('hint5')">üí° Indice</button>
                        <div class="hint-text" id="hint5">"Silence" et "assourdissant" sont-ils compatibles ?</div>
                        <div class="qcm-options">
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm5', 'a')">
                                <span class="qcm-circle"></span>
                                <span>Antith√®se</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm5', 'b')" data-correct="true">
                                <span class="qcm-circle"></span>
                                <span>Oxymore</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm5', 'c')">
                                <span class="qcm-circle"></span>
                                <span>Hyperbole</span>
                            </label>
                            <label class="qcm-option" onclick="selectQCM(this, 'qcm5', 'd')">
                                <span class="qcm-circle"></span>
                                <span>Euph√©misme</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div id="qcmResult" style="display: none;"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="qcmNextBtn" onclick="nextQCM()" style="display: none;">Question suivante ‚û°</button>
                    <button id="qcmResetBtn" onclick="resetQCM()" style="display: none;">Recommencer le QCM</button>
                </div>
            </div>

            <!-- EXERCICE 3: Texte √† trous -->
            <div class="exercise" style="margin-top: 30px;">
                <h2 style="color: #333; margin-top: 0;">‚úèÔ∏è Exercice 3 : Compl√®te les d√©finitions</h2>
                <p>Remplis les blancs avec le bon terme.</p>

                <div class="question">
                    <strong>1.</strong> La <input type="text" id="def1" placeholder="..." style="width: 150px;"> compare deux √©l√©ments avec un outil comme "comme" ou "tel".
                </div>

                <div class="question">
                    <strong>2.</strong> La <input type="text" id="def2" placeholder="..." style="width: 150px;"> est une comparaison sans outil de comparaison.
                </div>

                <div class="question">
                    <strong>3.</strong> L'<input type="text" id="def3" placeholder="..." style="width: 150px;"> est une exag√©ration volontaire.
                </div>

                <div class="question">
                    <strong>4.</strong> L'<input type="text" id="def4" placeholder="..." style="width: 150px;"> associe deux mots de sens contraire c√¥te √† c√¥te.
                </div>

                <div class="question">
                    <strong>5.</strong> La <input type="text" id="def5" placeholder="..." style="width: 150px;"> attribue des caract√©ristiques humaines √† un objet ou animal.
                </div>

                <div class="question">
                    <strong>6.</strong> L'<input type="text" id="def6" placeholder="..." style="width: 150px;"> est la r√©p√©tition d'un mot en d√©but de phrase.
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="checkDefinitions()">V√©rifier</button>
                    <button onclick="resetDefinitions()">Recommencer</button>
                </div>

                <div id="defResult"></div>
            </div>

            <!-- EXERCICE 4: Associer (Drag & Drop simulation avec clics) -->
            <div class="exercise" style="margin-top: 30px;">
                <h2 style="color: #333; margin-top: 0;">üîó Exercice 4 : Associe la phrase √† sa figure</h2>
                <p>Clique sur une phrase, puis sur la figure de style correspondante.</p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div>
                        <h4 style="color: #e74c3c;">Phrases :</h4>
                        <div class="match-item phrase" data-id="p1" onclick="selectMatch(this, 'phrase')">
                            ¬´ Il est rus√© comme un renard. ¬ª
                        </div>
                        <div class="match-item phrase" data-id="p2" onclick="selectMatch(this, 'phrase')">
                            ¬´ Cette nouvelle m'a tu√© ! ¬ª
                        </div>
                        <div class="match-item phrase" data-id="p3" onclick="selectMatch(this, 'phrase')">
                            ¬´ Il s'est endormi. ¬ª (pour "mort")
                        </div>
                        <div class="match-item phrase" data-id="p4" onclick="selectMatch(this, 'phrase')">
                            ¬´ J'aime, j'aime, j'aime encore ! ¬ª
                        </div>
                    </div>
                    <div>
                        <h4 style="color: #e74c3c;">Figures :</h4>
                        <div class="match-item figure" data-answer="p1" onclick="selectMatch(this, 'figure')">
                            Comparaison
                        </div>
                        <div class="match-item figure" data-answer="p4" onclick="selectMatch(this, 'figure')">
                            Anaphore
                        </div>
                        <div class="match-item figure" data-answer="p2" onclick="selectMatch(this, 'figure')">
                            Hyperbole
                        </div>
                        <div class="match-item figure" data-answer="p3" onclick="selectMatch(this, 'figure')">
                            Euph√©misme
                        </div>
                    </div>
                </div>

                <div id="matchResult" style="margin-top: 20px;"></div>
                <div style="text-align: center; margin-top: 15px;">
                    <button onclick="resetMatch()">Recommencer</button>
                </div>
            </div>

            <!-- EXERCICE 5: Quiz chronom√©tr√© -->
            <div class="exercise" style="margin-top: 30px;">
                <h2 style="color: #333; margin-top: 0;">‚è±Ô∏è Exercice 5 : Quiz rapide (30 secondes)</h2>
                <p>R√©ponds √† un maximum de questions en 30 secondes ! <strong>+15 points par bonne r√©ponse.</strong></p>

                <div id="speedQuizStart" style="text-align: center;">
                    <button onclick="startSpeedQuiz()" style="font-size: 20px; padding: 20px 40px;">üöÄ Commencer le quiz rapide</button>
                </div>

                <div id="speedQuizGame" style="display: none;">
                    <div class="timer" id="speedTimer">30</div>
                    <div class="question" id="speedQuestion">
                        <strong id="speedQuestionText"></strong>
                        <div class="qcm-options" id="speedOptions"></div>
                    </div>
                    <div id="speedScore" style="text-align: center; margin-top: 15px; font-size: 1.2em;">
                        Bonnes r√©ponses : <strong id="speedCorrect">0</strong>
                    </div>
                </div>

                <div id="speedQuizEnd" style="display: none; text-align: center;">
                    <h3>‚è±Ô∏è Temps √©coul√© !</h3>
                    <p style="font-size: 1.3em;">Tu as obtenu <strong id="speedFinalScore">0</strong> bonnes r√©ponses !</p>
                    <button onclick="startSpeedQuiz()">Rejouer</button>
                </div>
            </div>

        </div>
    </div>

    <style>
        .match-item {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .match-item:hover {
            border-color: #e74c3c;
        }
        .match-item.selected {
            border-color: #e74c3c;
            background: #fdf2f2;
        }
        .match-item.matched {
            border-color: #28a745;
            background: #d4edda;
            cursor: default;
        }
        .match-item.wrong {
            animation: shake 0.3s;
        }
    </style>

    <script>
        let totalScore = 0;
        let qcmCurrent = 1;
        const qcmTotal = 5;
        let qcmAnswered = {};

        // Flashcard data
        const flashcards = [
            { q: "Comparaison sans outil de comparaison ?", a: "La m√©taphore", d: "Ex: 'Cet homme est un lion'" },
            { q: "R√©p√©tition en d√©but de phrase ?", a: "L'anaphore", d: "Ex: 'Paris ! Paris outrag√© !'" },
            { q: "Exag√©ration volontaire ?", a: "L'hyperbole", d: "Ex: 'Je meurs de faim'" },
            { q: "Deux mots oppos√©s c√¥te √† c√¥te ?", a: "L'oxymore", d: "Ex: 'Un silence assourdissant'" },
            { q: "Att√©nuer une r√©alit√© d√©sagr√©able ?", a: "L'euph√©misme", d: "Ex: 'Il nous a quitt√©s' (mort)" },
            { q: "Dire moins pour sugg√©rer plus ?", a: "La litote", d: "Ex: 'Ce n'est pas mal' (c'est bien)" },
            { q: "Comparaison avec 'comme', 'tel'... ?", a: "La comparaison", d: "Ex: 'Fort comme un lion'" },
            { q: "Donner des traits humains √† un objet ?", a: "La personnification", d: "Ex: 'Le vent hurle'" }
        ];
        let currentCard = 0;

        // Speed quiz questions
        const speedQuestions = [
            { q: "¬´ Elle pleure comme une madeleine ¬ª", options: ["M√©taphore", "Comparaison", "Hyperbole", "Litote"], answer: 1 },
            { q: "¬´ Le temps est un voleur ¬ª", options: ["Comparaison", "M√©taphore", "Oxymore", "Anaphore"], answer: 1 },
            { q: "¬´ J'ai attendu une √©ternit√© ¬ª", options: ["Litote", "Euph√©misme", "Hyperbole", "Antith√®se"], answer: 2 },
            { q: "¬´ Les arbres dansaient ¬ª", options: ["M√©taphore", "Personnification", "Comparaison", "Hyperbole"], answer: 1 },
            { q: "¬´ Ce n'est pas b√™te ¬ª", options: ["Hyperbole", "Oxymore", "Litote", "Euph√©misme"], answer: 2 },
            { q: "¬´ Un mort-vivant ¬ª", options: ["Antith√®se", "Oxymore", "M√©taphore", "Comparaison"], answer: 1 },
            { q: "¬´ Demain, demain, toujours demain ¬ª", options: ["Hyperbole", "Litote", "Anaphore", "Oxymore"], answer: 2 },
            { q: "¬´ Il s'est √©teint ¬ª (pour mort)", options: ["Litote", "Euph√©misme", "Hyperbole", "M√©taphore"], answer: 1 }
        ];

        // Update score display
        function updateScore(points) {
            totalScore += points;
            document.getElementById('totalScore').textContent = totalScore;
            document.getElementById('totalScore').parentElement.classList.add('bounce');
            setTimeout(() => {
                document.getElementById('totalScore').parentElement.classList.remove('bounce');
            }, 300);
        }

        // Flashcard functions
        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }

        function updateFlashcard() {
            const card = flashcards[currentCard];
            document.getElementById('flashcard-question').textContent = card.q;
            document.getElementById('flashcard-answer-title').textContent = card.a;
            document.getElementById('flashcard-answer-desc').textContent = card.d;
            document.getElementById('cardCurrent').textContent = currentCard + 1;
            document.getElementById('cardTotal').textContent = flashcards.length;
            document.getElementById('flashcard').classList.remove('flipped');
        }

        function nextCard() {
            currentCard = (currentCard + 1) % flashcards.length;
            updateFlashcard();
        }

        function prevCard() {
            currentCard = (currentCard - 1 + flashcards.length) % flashcards.length;
            updateFlashcard();
        }

        // Show hint
        function showHint(id) {
            const hint = document.getElementById(id);
            hint.classList.toggle('show');
        }

        // QCM functions
        function selectQCM(option, qId, answer) {
            if (qcmAnswered[qId]) return;

            const options = document.querySelectorAll(`#${qId} .qcm-option`);
            options.forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');

            const isCorrect = option.hasAttribute('data-correct');
            qcmAnswered[qId] = true;

            setTimeout(() => {
                options.forEach(opt => {
                    if (opt.hasAttribute('data-correct')) {
                        opt.classList.add('correct');
                    } else if (opt.classList.contains('selected')) {
                        opt.classList.add('incorrect');
                    }
                });

                if (isCorrect) {
                    updateScore(10);
                }

                updateQCMProgress();

                if (qcmCurrent < qcmTotal) {
                    document.getElementById('qcmNextBtn').style.display = 'inline-block';
                } else {
                    showQCMResult();
                }
            }, 500);
        }

        function nextQCM() {
            document.getElementById('qcm' + qcmCurrent).style.display = 'none';
            qcmCurrent++;
            document.getElementById('qcm' + qcmCurrent).style.display = 'block';
            document.getElementById('qcmNextBtn').style.display = 'none';
        }

        function updateQCMProgress() {
            const answered = Object.keys(qcmAnswered).length;
            const progress = (answered / qcmTotal) * 100;
            document.getElementById('qcmProgress').style.width = progress + '%';
        }

        function showQCMResult() {
            const correct = document.querySelectorAll('.qcm-option.correct.selected').length;
            document.getElementById('qcmNextBtn').style.display = 'none';
            document.getElementById('qcmResetBtn').style.display = 'inline-block';
            const resultDiv = document.getElementById('qcmResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result ' + (correct >= 4 ? 'correct' : correct >= 2 ? 'partial' : 'incorrect');
            resultDiv.innerHTML = `üéØ QCM termin√© ! ${correct}/${qcmTotal} bonnes r√©ponses`;
        }

        function resetQCM() {
            qcmCurrent = 1;
            qcmAnswered = {};
            for (let i = 1; i <= qcmTotal; i++) {
                const q = document.getElementById('qcm' + i);
                q.style.display = i === 1 ? 'block' : 'none';
                q.querySelectorAll('.qcm-option').forEach(opt => {
                    opt.classList.remove('selected', 'correct', 'incorrect');
                });
            }
            document.getElementById('qcmProgress').style.width = '0%';
            document.getElementById('qcmResult').style.display = 'none';
            document.getElementById('qcmResetBtn').style.display = 'none';
        }

        // Definitions exercise
        const defAnswers = {
            def1: ['comparaison'],
            def2: ['m√©taphore', 'metaphore'],
            def3: ['hyperbole'],
            def4: ['oxymore'],
            def5: ['personnification'],
            def6: ['anaphore']
        };

        function checkDefinitions() {
            let score = 0;
            for (let i = 1; i <= 6; i++) {
                const input = document.getElementById('def' + i);
                const userAnswer = input.value.toLowerCase().trim();
                const correct = defAnswers['def' + i].some(a => userAnswer.includes(a));
                if (correct) {
                    score++;
                    input.style.borderColor = '#28a745';
                } else {
                    input.style.borderColor = '#dc3545';
                }
            }
            updateScore(score * 5);
            const resultDiv = document.getElementById('defResult');
            resultDiv.className = 'result ' + (score === 6 ? 'correct' : score >= 3 ? 'partial' : 'incorrect');
            resultDiv.innerHTML = `${score}/6 d√©finitions correctes (+${score * 5} points)`;
        }

        function resetDefinitions() {
            for (let i = 1; i <= 6; i++) {
                const input = document.getElementById('def' + i);
                input.value = '';
                input.style.borderColor = '#ddd';
            }
            document.getElementById('defResult').innerHTML = '';
            document.getElementById('defResult').className = '';
        }

        // Match exercise
        let selectedPhrase = null;
        let matchedPairs = 0;

        function selectMatch(item, type) {
            if (item.classList.contains('matched')) return;

            if (type === 'phrase') {
                document.querySelectorAll('.match-item.phrase').forEach(p => p.classList.remove('selected'));
                item.classList.add('selected');
                selectedPhrase = item.dataset.id;
            } else if (type === 'figure' && selectedPhrase) {
                const correctAnswer = item.dataset.answer;
                if (correctAnswer === selectedPhrase) {
                    item.classList.add('matched');
                    document.querySelector(`.phrase[data-id="${selectedPhrase}"]`).classList.add('matched');
                    document.querySelector(`.phrase[data-id="${selectedPhrase}"]`).classList.remove('selected');
                    matchedPairs++;
                    updateScore(10);
                    if (matchedPairs === 4) {
                        document.getElementById('matchResult').innerHTML = '<div class="result correct">üéâ Bravo ! Toutes les associations sont correctes !</div>';
                    }
                } else {
                    item.classList.add('wrong');
                    setTimeout(() => item.classList.remove('wrong'), 300);
                }
                selectedPhrase = null;
            }
        }

        function resetMatch() {
            selectedPhrase = null;
            matchedPairs = 0;
            document.querySelectorAll('.match-item').forEach(item => {
                item.classList.remove('selected', 'matched', 'wrong');
            });
            document.getElementById('matchResult').innerHTML = '';
        }

        // Speed Quiz
        let speedTimer;
        let speedTimeLeft;
        let speedCorrectCount;
        let speedCurrentQ;

        function startSpeedQuiz() {
            speedTimeLeft = 30;
            speedCorrectCount = 0;
            speedCurrentQ = 0;

            document.getElementById('speedQuizStart').style.display = 'none';
            document.getElementById('speedQuizEnd').style.display = 'none';
            document.getElementById('speedQuizGame').style.display = 'block';

            showSpeedQuestion();

            speedTimer = setInterval(() => {
                speedTimeLeft--;
                const timerEl = document.getElementById('speedTimer');
                timerEl.textContent = speedTimeLeft;

                if (speedTimeLeft <= 10) timerEl.className = 'timer warning';
                if (speedTimeLeft <= 5) timerEl.className = 'timer danger';

                if (speedTimeLeft <= 0) {
                    endSpeedQuiz();
                }
            }, 1000);
        }

        function showSpeedQuestion() {
            const q = speedQuestions[speedCurrentQ % speedQuestions.length];
            document.getElementById('speedQuestionText').textContent = q.q;

            const optionsDiv = document.getElementById('speedOptions');
            optionsDiv.innerHTML = '';

            q.options.forEach((opt, idx) => {
                const label = document.createElement('label');
                label.className = 'qcm-option';
                label.innerHTML = `<span class="qcm-circle"></span><span>${opt}</span>`;
                label.onclick = () => checkSpeedAnswer(idx, q.answer, label);
                optionsDiv.appendChild(label);
            });
        }

        function checkSpeedAnswer(selected, correct, element) {
            const options = document.querySelectorAll('#speedOptions .qcm-option');
            options.forEach((opt, idx) => {
                opt.onclick = null;
                if (idx === correct) opt.classList.add('correct');
                if (idx === selected && selected !== correct) opt.classList.add('incorrect');
            });

            if (selected === correct) {
                speedCorrectCount++;
                updateScore(15);
                document.getElementById('speedCorrect').textContent = speedCorrectCount;
            }

            setTimeout(() => {
                speedCurrentQ++;
                showSpeedQuestion();
            }, 500);
        }

        function endSpeedQuiz() {
            clearInterval(speedTimer);
            document.getElementById('speedQuizGame').style.display = 'none';
            document.getElementById('speedQuizEnd').style.display = 'block';
            document.getElementById('speedFinalScore').textContent = speedCorrectCount;
            document.getElementById('speedTimer').className = 'timer';
        }

        // Initialize
        updateFlashcard();
    </script>
</body>
</html>
